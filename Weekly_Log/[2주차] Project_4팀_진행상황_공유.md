## 팀 구성원, 개인 별 역할

---

2주차 역할

- 최하나: 카카오맵 API 연동 및 기본 기능 구현
- 조성열: Prometheus와 Grafana 연동 구현
- 강영구: helmchart수정, argocdtest
- 안주현: 소셜로그인 구현, 장고 기본 로그인/회원가입 구현

## 팀 내부 회의 진행 회차 및 일자

---

- (2023.10.6 금): 진행상황 점검 및 강사님들의 프로젝트 피드백, 개발방향 의논(모두 참여)
- (2023.10.10 화): 진행상황 점검 및 계획(강영구, 조성열, 최하나)
- (2023.10.11 수): prometheus를 이용한 Grafana 작업 토의( 강영구, 조성열)
## 현재까지 개발 과정 요약 (최소 500자 이상)

---

[기능별 목표]

- back-end
    1. 메인화면
        - CRUD (80%)
            - 약속 생성하기 (90%)
                - 주소 입력 보완 필요 (100%)
                - 비밀번호 입력하는 방 필요 (진행중)
            - 약속 조회하기 (100%)
            - 약속 수정하기 (100%)
            - 약속 삭제하기 (100%)
        - ListView (75%)
            - Pagination (100%)
            - 오늘 기준으로 다가올 약속과 지나간 약속 분리해서 정렬 (100%)
            - 다가올 약속은 D-day 표시 (100%)
            - 약속마다 참여중/방장 표시해주기 (0%)
        - 카테고리 추가: study, work, play 등 (100%)
        
        (추가 해 볼 기능)
        
        - side bar 영역 → 다양한 검색 필터 제공 (25%)
            - 키워드 검색 (0%)
            - 날짜 별 조회 (0%)
            - 참여중/미참여 체크박스 (0%)
            - 카테고리 별 필터 제공 (100%)
        
    2. 약속 상세페이지 (95%)
        - 약속 상세 정보
            - 제목
            - 시간
            - 장소명
            - 장소지도
            - 초대 코드 → 초대하기 버튼으로 변경해서 누르면 코드가 복사되는 형태로 변경
            - 참여자 목록
        - 참여하기/나가기 기능 (100%): 방장 아닐때
        - 약속 수정/삭제 기능(100%): 방장 일때
        - 페이지 방문한 참여자 위치 업데이트 (100%)
        - 댓글 작성 기능
            - 생성 (100%)
            - 수정
            - 삭제
        
    3. 참여자 위치 확인 페이지 (20%)
        - 해당 약속 참여자의 db에 업로드된 최근 위치로 보여짐 (100%)
        - 도착 완료 기능
        - 도착 완료/오는중인 유저 리스트
        - 불참 기능
        - [약속 장소와 참여자의 거리 계산 (단순 직선거리)](https://apis.map.kakao.com/web/sample/calculatePolylineDistance/)
        - Tmap api 경로
        
    4. 로그인/회원가입
        - 장고 기본 로그인/회원가입
        - 소셜 로그인
            - 카카오
            
    5. 마이페이지 (0%)
- dev
    - prometheus와 grafana를 로컬에서 정상 작동을 확인하여서 k8s로 배포하기 (70% )
    - 이제 CI CD를 나누어서 다시 보완하기 ( 0% )
    - tag를 달고 첫 배포 진행해보기 ( 0% )

[팀원 개인 별 성과 자체 평가]

- 최하나
    - 처음 목표로 했던 기능들은 어느정도 구현이 되었는데, 유효성 검사나 지도 쪽을 더 보완해서 완성도를 높이는 작업이 필요할것 같습니다. 이 단계에서 우선순위를 정해서 어떤것 부터 보완할지 정하는게 필요했습니다.
    - ListView 클래스형 함수를 사용해서 메인 화면을 구성했는데, 그 안에서 현재 시점보다 빠른 plan과 느린 plan을 각각 나누어서 각각 다르게 정렬하는 부분이 꽤 복잡했습니다.
- 강영구
    - 협업 과정중에 Uuid 문제로 k8s cluster에 접근하지 못하는 이슈가있었는데 npc-iam을 등록해주는 명령어를 이용하여 해결하였습니다.
    - 기존에 짯던 helmchart를 사용할수 없어 오류로 정상적인 진행을 하지 못하여 helmchart를 수업에서 배운 내용으로 다시작성하였는데 어려움을 겪었고 소모한 시간이 많아 아쉬움이 남았습니다.
- 조성열
    - 현재 prometheus와 grafana가 정상적으로 출력되는 것을 확인하였는데 이제 k8s로 배포된 diango와 연결하여 상태를 확인하기 위해서 k8s로 배포할려고 합니다.
    - helm-chart 안에서 liveness와 readiness 오류가 발생하였는데 로컬에서 확인해보니 django secret key를 정상적으로 가져오지 않아서 생기는 오류였습니다. 그래서 `env` 값들을 다시 확인하고 수정하는 작업을 진행중입니다.
- 안주현
    - 지난 주차까지 모두 참여했으나, 화/수 예비군으로 불참하여 작성하지 못했습니다.
## 개발 과정에서 나왔던 질문 (최소 200자 이상)

---

- Plan 모델이 있고, 해당 plan에 참여하게 되면 데이터가 쌓이는 group 모델이 있는데, 약속을 생성한 방장의 경우에는 plan.owner로 들어있고 group에는 들어 있지 않은 상태였습니다. 개발하면서 참여자목록을 보여주거나 참여자의 위치정보를 보여줄 때 방장도 group에 포함시켜야할지, 이미 plan에 owner로 되어있기 때문에 쿼리로 조합해서 보여주면 될지 고민되었는데 plan list에서 참여중인 방만 노출 시켜줄때 `plan_ids = Group.objects.filter(user=*self*.request.user).values_list('plan_id', flat=*True*)`
    
    위 코드처럼 로그인 한 유저의 group 내 모든 plan_id를 가져오는데 이때 방장인 경우를 포함 시켜주기 위해 plan을 생성한 후 group에 추가되도록 변경하였습니다. 이렇게 모델에 추가되는 경우가 여러가지 인 케이스에 대해 어떻게 다루는게 효율적일지 고민되었습니다. 
    
- helm-chat 연결중 오류로 찾아봐도 해결하지 못하였는데 멘토님의 조언으로 exit code 137 오류에 대해 알아보았습니다. exit code 137 문제인 것 같았는데 해결이 안되어 livenessProbe readinessProbe의 path가 같아서 나오는 오류였던 것같습니다.
- docker-compose로 컨테이너를 실행할 때 볼륨을 사용하면 데이터가 docker 호스트에 영구적으로 저장이 되어서 `docker-compose exec` 를 사용하여 migration을 진행해야지 db 테이블이 정상적으로 업데이트 되었습니다.
## 개발 결과물 공유

---

## 개발 결과물 공유

---

Github Repository URL: https://github.com/likelion-backend-6th/wemeet_app/tree/develop 

![img_1.png](img_1.png)